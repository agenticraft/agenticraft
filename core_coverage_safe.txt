============================= test session starts ==============================
platform darwin -- Python 3.11.6, pytest-8.4.0, pluggy-1.6.0
rootdir: /Users/zahere/Desktop/TLV/agenticraft
configfile: pytest.ini
plugins: xdist-3.7.0, anyio-4.9.0, timeout-2.4.0, mock-3.14.1, cov-6.1.1, asyncio-1.0.0
asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 259 items

tests/unit/core/test_agent.py ........................                   [  9%]
tests/unit/core/test_agent_config_provider.py ............               [ 13%]
tests/unit/core/test_config.py ................s.s.....                  [ 23%]
tests/unit/core/test_exceptions.py ........................              [ 32%]
tests/unit/core/test_memory.py ..........................                [ 42%]
tests/unit/core/test_plugin.py ...................                       [ 49%]
tests/unit/core/test_provider_factory.py ............                    [ 54%]
tests/unit/core/test_provider_switching.py .......                       [ 57%]
tests/unit/core/test_reasoning.py ...................                    [ 64%]
tests/unit/core/test_telemetry.py ................                       [ 70%]
tests/unit/core/test_tool.py .............................               [ 81%]
tests/unit/core/test_types.py ........................                   [ 91%]
tests/unit/core/test_workflow.py .......................                 [100%]

================================ tests coverage ================================
_______________ coverage: platform darwin, python 3.11.6-final-0 _______________

Name                                         Stmts   Miss Branch BrPart   Cover   Missing
-----------------------------------------------------------------------------------------
agenticraft/core/agent.py                      342    137    114      9  54.39%   65-69, 257, 263-269, 399->440, 516-653, 690-713, 802-846, 868-897, 910-932, 997, 1005, 1009, 1022, 1024, 1039-1047, 1059-1062, 1086-1091
agenticraft/core/auth/base.py                   93     30     10      0  61.17%   37, 42, 51, 59, 67, 76, 93, 106, 116, 126, 139, 149, 178-185, 189, 201-204, 208-211, 215-218, 230-234
agenticraft/core/auth/simple.py                 31     20      8      0  28.21%   16, 21-31, 35-37, 47-52, 56-59, 63-71, 75
agenticraft/core/auth/strategies.py            176    123     30      0  25.73%   19-21, 33, 37, 41, 49-51, 55-67, 71, 75, 83-84, 88-100, 104, 108, 116-118, 122-143, 147-149, 153, 161-168, 172-215, 221, 230-240, 248, 258-271, 279-295, 299-330, 334-335, 339, 344-371
agenticraft/core/config.py                      96      1     16      4  95.54%   255->254, 258->exit, 306->exit, 308
agenticraft/core/exceptions.py                  87     13      4      0  83.52%   66-68, 102-107, 199-200, 207-208
agenticraft/core/memory.py                     176     24     56      9  83.19%   50->52, 97-98, 112, 117, 122, 130, 194-199, 230, 234-239, 257, 277, 283->exit, 284->283, 286->288, 289, 296, 301, 306, 333->330
agenticraft/core/patterns/client_server.py     172    120     24      0  26.53%   47-50, 64-65, 77, 81-84, 88-90, 94-132, 137-167, 172, 177, 190-191, 195-197, 202-208, 230-269, 279-291, 295-306, 311, 316, 324-325, 344-350, 369-375, 379, 383, 388-396, 401-419, 424-442
agenticraft/core/patterns/consensus.py          96     56     24      0  33.33%   48-52, 57, 62, 67, 71-72, 76-77, 81-92, 100-101, 105-117, 121-126, 131-179
agenticraft/core/patterns/mesh.py               57     24     12      0  47.83%   43-46, 51, 56, 65, 72, 76, 81-100
agenticraft/core/patterns/pubsub.py             56     25     10      0  46.97%   44, 57, 62, 70-71, 75-78, 87-105, 113-119, 123-124
agenticraft/core/plugin.py                     180     68     12      1  58.85%   36-37, 124, 131, 138, 145, 152, 158, 162, 172, 180, 188, 201, 211, 221, 233, 242, 251, 262, 273, 282, 291, 301, 310, 321, 333, 346, 357, 373, 381-382, 386, 392-396, 402-406, 412-416, 420-425, 429, 445, 450, 464, 474, 480, 488, 500-501, 509, 518-519, 523, 527, 531
agenticraft/core/provider.py                    65     10     26      4  82.42%   76, 85, 134-140, 187, 199, 204
agenticraft/core/reasoning.py                  154     24     58      9  79.72%   76, 89, 143, 148, 175, 213->215, 215->218, 243, 256->251, 262->257, 268->251, 293-295, 299-318
agenticraft/core/registry/base.py              110     46     14      0  51.61%   45, 61, 80, 106, 119, 139, 152, 166, 186, 199, 208-217, 235-244, 253-266, 276, 286, 291, 295, 299, 311-312, 319-320
agenticraft/core/registry/distributed.py        59     36     10      0  33.33%   35-43, 57-64, 69-75, 85, 90-95, 100-109, 119-129, 134, 139, 144, 149-152, 163-164, 175, 186, 196, 200
agenticraft/core/registry/memory.py            118     94     32      0  16.00%   31-33, 45-66, 70-82, 91-107, 111-112, 116-131, 140-156, 160-184, 188-192, 196-200, 204-210, 214, 218, 222-223, 232-240
agenticraft/core/serialization/base.py          15      4      0      0  73.33%   27, 43, 55, 67
agenticraft/core/serialization/json.py          37     26     12      0  22.45%   17-30, 44-46, 54-58, 62-66
agenticraft/core/serialization/msgpack.py       23     12      2      0  44.00%   8, 26-32, 36-42, 46-53
agenticraft/core/streaming.py                  103     55     28      0  36.64%   50, 83-90, 95-97, 102, 106, 132, 141, 152-153, 169-170, 187-198, 209-213, 217, 221-224, 239-244, 256-259, 276-290
agenticraft/core/telemetry.py                   99      3     24      3  95.12%   139, 225, 250
agenticraft/core/tool.py                       161     29     54     12  80.00%   70, 74, 79, 83, 118, 125, 129->164, 137-141, 149->153, 201->207, 210-218, 227, 237->exit, 241, 262, 265, 267, 325, 338, 352, 409, 416-422, 426
agenticraft/core/transport/base.py             103     35      6      0  62.39%   50, 70-73, 78, 83, 96, 106, 111, 120, 129, 143-150, 160-161, 166, 175, 184, 188-189, 193, 240-243, 259-267, 272
agenticraft/core/transport/http.py              84     67     28      0  15.18%   26-28, 32-65, 69-74, 86-143, 151, 155-166, 175, 194-197
agenticraft/core/transport/websocket.py        165    137     58      1  13.00%   18-20, 35-54, 58-92, 97-120, 132-170, 179-186, 190-229, 233-247, 253-262, 268-273, 287-295, 300, 304->exit
agenticraft/core/types.py                       84      4     20      2  94.23%   45, 89-99, 103
agenticraft/core/workflow.py                   217     46     88     13  73.44%   41-43, 109-151, 178, 221-223, 261, 309, 311->315, 328, 374, 382->381, 387->421, 395-401, 456-459, 471-476, 489-494, 504, 510->513, 523
-----------------------------------------------------------------------------------------
TOTAL                                         3159   1269    780     67  55.37%
Coverage HTML written to dir htmlcov_core
======================= 257 passed, 2 skipped in 10.66s ========================
Transient error StatusCode.UNAVAILABLE encountered while exporting metrics to telemetry.example.com:4317, retrying in 1s.
Transient error StatusCode.UNAVAILABLE encountered while exporting metrics to telemetry.example.com:4317, retrying in 2s.
Transient error StatusCode.UNAVAILABLE encountered while exporting metrics to telemetry.example.com:4317, retrying in 4s.
Transient error StatusCode.UNAVAILABLE encountered while exporting metrics to telemetry.example.com:4317, retrying in 8s.
