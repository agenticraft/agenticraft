============================= test session starts ==============================
platform darwin -- Python 3.11.6, pytest-8.4.0, pluggy-1.6.0 -- /Users/zahere/Desktop/TLV/agenticraft/venv/bin/python3.11
cachedir: .pytest_cache
rootdir: /Users/zahere/Desktop/TLV/agenticraft
configfile: pytest.ini
plugins: xdist-3.7.0, anyio-4.9.0, timeout-2.4.0, mock-3.14.1, cov-6.1.1, asyncio-1.0.0
asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 1050 items

tests/examples/test_all_providers.py::test_all_providers PASSED          [  0%]
tests/examples/test_all_providers.py::test_provider_specific_features PASSED [  0%]
tests/examples/test_examples_pytest.py::TestExamples::test_reasoning_examples_structure PASSED [  0%]
tests/examples/test_websocket_minimal.py::TestWebSocketMinimal::test_imports PASSED [  0%]
tests/examples/test_websocket_minimal.py::TestWebSocketMinimal::test_tool_decorator PASSED [  0%]
tests/examples/test_websocket_minimal.py::TestWebSocketMinimal::test_server_creation PASSED [  0%]
tests/examples/test_websocket_minimal.py::TestWebSocketMinimal::test_tool_registration PASSED [  0%]
tests/examples/test_websocket_mocked.py::test_basic_connection_mocked PASSED [  0%]
tests/examples/test_websocket_mocked.py::test_tool_execution_mocked PASSED [  0%]
tests/examples/test_websocket_mocked.py::test_concurrent_connections_mocked PASSED [  0%]
tests/examples/test_websocket_mocked.py::test_error_handling_mocked PASSED [  1%]
tests/examples/test_websocket_pytest.py::test_basic_connection SKIPPED   [  1%]
tests/examples/test_websocket_pytest.py::test_tool_execution SKIPPED     [  1%]
tests/examples/test_websocket_pytest.py::test_concurrent_connections SKIPPED [  1%]
tests/examples/test_websocket_pytest.py::test_error_handling SKIPPED     [  1%]
tests/examples/test_websocket_pytest.py::test_large_payload SKIPPED      [  1%]
tests/examples/test_websocket_pytest.py::test_websocket_performance SKIPPED [  1%]
tests/examples/test_websocket_transport.py::test_websocket_transport PASSED [  1%]
tests/examples/test_websocket_transport.py::test_performance PASSED      [  1%]
tests/fabric/test_decorators.py::TestAgentDecorator::test_basic_agent_decorator PASSED [  1%]
tests/fabric/test_decorators.py::TestAgentDecorator::test_agent_with_all_options PASSED [  2%]
tests/fabric/test_decorators.py::TestAgentDecorator::test_reasoning_agent_selection PASSED [  2%]
tests/fabric/test_decorators.py::TestAgentDecorator::test_decorated_agent_execution PASSED [  2%]
tests/fabric/test_decorators.py::TestAgentDecorator::test_sync_function_wrapper PASSED [  2%]
tests/fabric/test_decorators.py::TestToolProxy::test_tool_access_by_name PASSED [  2%]
tests/fabric/test_decorators.py::TestToolProxy::test_tool_not_found PASSED [  2%]
tests/fabric/test_decorators.py::TestToolProxy::test_tool_execution PASSED [  2%]
tests/fabric/test_decorators.py::TestToolProxy::test_tool_dir PASSED     [  2%]
tests/fabric/test_decorators.py::TestConfigurationLoading::test_load_agent_config PASSED [  2%]
tests/fabric/test_decorators.py::TestConfigurationLoading::test_load_nonexistent_config PASSED [  2%]
tests/fabric/test_decorators.py::TestConfigurationLoading::test_from_config_decorator PASSED [  2%]
tests/fabric/test_decorators.py::TestWorkflowDecorators::test_workflow_decorator PASSED [  3%]
tests/fabric/test_decorators.py::TestWorkflowDecorators::test_step_decorator PASSED [  3%]
tests/fabric/test_decorators.py::TestAgentRegistry::test_register_and_get_agent PASSED [  3%]
tests/fabric/test_decorators.py::TestAgentRegistry::test_registry_list PASSED [  3%]
tests/fabric/test_decorators.py::TestChainAndParallel::test_chain_decorator PASSED [  3%]
tests/fabric/test_decorators.py::TestChainAndParallel::test_parallel_decorator PASSED [  3%]
tests/fabric/test_decorators.py::TestDecoratedAgentIntegration::test_agent_initialization_flow PASSED [  3%]
tests/fabric/test_decorators.py::TestDecoratedAgentIntegration::test_arun_compatibility PASSED [  3%]
tests/fabric/test_enhanced_fabric.py::TestACPAdapter::test_protocol_type PASSED [  3%]
tests/fabric/test_enhanced_fabric.py::TestACPAdapter::test_connect PASSED [  3%]
tests/fabric/test_enhanced_fabric.py::TestACPAdapter::test_discover_tools PASSED [  4%]
tests/fabric/test_enhanced_fabric.py::TestACPAdapter::test_execute_tool PASSED [  4%]
tests/fabric/test_enhanced_fabric.py::TestACPAdapter::test_execute_tool_invalid_format PASSED [  4%]
tests/fabric/test_enhanced_fabric.py::TestACPAdapter::test_session_management PASSED [  4%]
tests/fabric/test_enhanced_fabric.py::TestACPAdapter::test_get_capabilities PASSED [  4%]
tests/fabric/test_enhanced_fabric.py::TestANPAdapter::test_protocol_type PASSED [  4%]
tests/fabric/test_enhanced_fabric.py::TestANPAdapter::test_connect PASSED [  4%]
tests/fabric/test_enhanced_fabric.py::TestANPAdapter::test_connect_unsupported_did_method PASSED [  4%]
tests/fabric/test_enhanced_fabric.py::TestANPAdapter::test_discover_tools PASSED [  4%]
tests/fabric/test_enhanced_fabric.py::TestANPAdapter::test_execute_tool PASSED [  4%]
tests/fabric/test_enhanced_fabric.py::TestANPAdapter::test_execute_tool_agent_not_found PASSED [  4%]
tests/fabric/test_enhanced_fabric.py::TestANPAdapter::test_create_agent_did PASSED [  5%]
tests/fabric/test_enhanced_fabric.py::TestANPAdapter::test_get_capabilities PASSED [  5%]
tests/fabric/test_enhanced_fabric.py::TestEnhancedUnifiedProtocolFabric::test_all_adapters_registered PASSED [  5%]
tests/fabric/test_enhanced_fabric.py::TestEnhancedUnifiedProtocolFabric::test_extensions_registered PASSED [  5%]
tests/fabric/test_enhanced_fabric.py::TestEnhancedUnifiedProtocolFabric::test_create_mesh_network FAILED [  5%]
tests/fabric/test_enhanced_fabric.py::TestEnhancedUnifiedProtocolFabric::test_enable_consensus FAILED [  5%]
tests/fabric/test_enhanced_fabric.py::TestEnhancedUnifiedProtocolFabric::test_enable_reasoning_traces FAILED [  5%]
tests/fabric/test_enhanced_fabric.py::TestEnhancedUnifiedProtocolFabric::test_enable_invalid_extension PASSED [  5%]
tests/fabric/test_enhanced_fabric.py::TestProtocolExtensions::test_mesh_networking_extension PASSED [  5%]
tests/fabric/test_enhanced_fabric.py::TestProtocolExtensions::test_consensus_extension PASSED [  5%]
tests/fabric/test_enhanced_fabric.py::TestProtocolExtensions::test_reasoning_trace_extension PASSED [  6%]
tests/fabric/test_enhanced_fabric.py::TestWebDIDResolver::test_resolve_did PASSED [  6%]
tests/fabric/test_enhanced_fabric.py::TestFullProtocolIntegration::test_all_protocols_config PASSED [  6%]
tests/fabric/test_sdk_integration.py::TestSDKIntegration::test_sdk_preference_parsing FAILED [  6%]
tests/fabric/test_sdk_integration.py::TestSDKIntegration::test_sdk_preference_enum FAILED [  6%]
tests/fabric/test_sdk_integration.py::TestSDKIntegration::test_register_server_with_sdk PASSED [  6%]
tests/fabric/test_sdk_integration.py::TestSDKIntegration::test_update_sdk_preference PASSED [  6%]
tests/fabric/test_sdk_integration.py::TestSDKIntegration::test_get_sdk_info FAILED [  6%]
tests/fabric/test_sdk_integration.py::TestSDKIntegration::test_migrate_to_official_sdks PASSED [  6%]
tests/fabric/test_sdk_integration.py::TestSDKIntegration::test_hybrid_adapter_fallback PASSED [  6%]
tests/fabric/test_sdk_integration.py::TestAdapterFactory::test_get_available_adapters FAILED [  6%]
tests/fabric/test_sdk_integration.py::TestAdapterFactory::test_get_best_adapter PASSED [  7%]
tests/fabric/test_sdk_integration.py::TestAdapterFactory::test_create_adapter_auto PASSED [  7%]
tests/fabric/test_sdk_integration.py::TestOfficialAdapters::test_mcp_official_adapter PASSED [  7%]
tests/fabric/test_sdk_integration.py::TestOfficialAdapters::test_a2a_official_adapter FAILED [  7%]
tests/fabric/test_sdk_integration.py::TestOfficialAdapters::test_acp_bee_adapter PASSED [  7%]
tests/fabric/test_sdk_integration.py::TestEndToEndSDKMigration::test_gradual_migration PASSED [  7%]
tests/fabric/test_sdk_integration.py::TestEndToEndSDKMigration::test_preserve_agenticraft_features FAILED [  7%]
tests/fabric/test_unified.py::TestUnifiedProtocolFabric::test_fabric_initialization PASSED [  7%]
tests/fabric/test_unified.py::TestUnifiedProtocolFabric::test_initialize_empty_config PASSED [  7%]
tests/fabric/test_unified.py::TestUnifiedProtocolFabric::test_initialize_with_mcp FAILED [  7%]

=================================== FAILURES ===================================
__________ TestEnhancedUnifiedProtocolFabric.test_create_mesh_network __________
tests/fabric/test_enhanced_fabric.py:327: in test_create_mesh_network
    assert "mesh_id" in result
E   AssertionError: assert 'mesh_id' in {'agents': ['agent1', 'agent2', 'agent3'], 'connections': 3, 'status': 'active', 'topology': 'ring'}
___________ TestEnhancedUnifiedProtocolFabric.test_enable_consensus ____________
tests/fabric/test_enhanced_fabric.py:340: in test_enable_consensus
    assert "consensus_id" in result
E   AssertionError: assert 'consensus_id' in {'min_agents': 5, 'status': 'ready', 'type': 'pbft'}
________ TestEnhancedUnifiedProtocolFabric.test_enable_reasoning_traces ________
tests/fabric/test_enhanced_fabric.py:350: in test_enable_reasoning_traces
    assert "trace_id" in result
E   AssertionError: assert 'trace_id' in {'collectors': ['chain_of_thought', 'tree_of_thoughts', 'react'], 'level': 'verbose', 'status': 'enabled'}
________________ TestSDKIntegration.test_sdk_preference_parsing ________________
tests/fabric/test_sdk_integration.py:36: in test_sdk_preference_parsing
    fabric = SDKEnabledUnifiedProtocolFabric(
agenticraft/fabric/legacy.py:396: in __init__
    self._register_default_adapters()
agenticraft/fabric/legacy.py:526: in _register_default_adapters
    adapter = AdapterFactory.create_adapter(protocol, preference)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
agenticraft/fabric/adapters/adapter_factory.py:90: in create_adapter
    return cls._create_auto_adapter(protocol, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
agenticraft/fabric/adapters/adapter_factory.py:127: in _create_auto_adapter
    custom_class = cls.ADAPTERS[protocol]['custom']
                   ^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: <ProtocolType.NATIVE: 'native'>
_________________ TestSDKIntegration.test_sdk_preference_enum __________________
tests/fabric/test_sdk_integration.py:51: in test_sdk_preference_enum
    fabric = SDKEnabledUnifiedProtocolFabric(
agenticraft/fabric/legacy.py:396: in __init__
    self._register_default_adapters()
agenticraft/fabric/legacy.py:526: in _register_default_adapters
    adapter = AdapterFactory.create_adapter(protocol, preference)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
agenticraft/fabric/adapters/adapter_factory.py:90: in create_adapter
    return cls._create_auto_adapter(protocol, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
agenticraft/fabric/adapters/adapter_factory.py:122: in _create_auto_adapter
    return cls.create_adapter(
agenticraft/fabric/adapters/adapter_factory.py:98: in create_adapter
    return adapter_class(fallback_adapter=custom_adapter)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: ACPAdapter.__init__() got an unexpected keyword argument 'fallback_adapter'
_____________________ TestSDKIntegration.test_get_sdk_info _____________________
tests/fabric/test_sdk_integration.py:101: in test_get_sdk_info
    info = fabric.get_sdk_info()
           ^^^^^^^^^^^^^^^^^^^^^
agenticraft/fabric/legacy.py:470: in get_sdk_info
    availability = AdapterFactory.get_available_adapters()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
agenticraft/fabric/adapters/adapter_factory.py:228: in get_available_adapters
    'custom': cls.ADAPTERS[protocol]['custom'] is not None,
              ^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: <ProtocolType.NATIVE: 'native'>
________________ TestAdapterFactory.test_get_available_adapters ________________
tests/fabric/test_sdk_integration.py:144: in test_get_available_adapters
    status = AdapterFactory.get_available_adapters()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
agenticraft/fabric/adapters/adapter_factory.py:228: in get_available_adapters
    'custom': cls.ADAPTERS[protocol]['custom'] is not None,
              ^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: <ProtocolType.NATIVE: 'native'>
________________ TestOfficialAdapters.test_a2a_official_adapter ________________
tests/fabric/test_sdk_integration.py:208: in test_a2a_official_adapter
    adapter = A2AOfficialAdapter()
              ^^^^^^^^^^^^^^^^^^^^
agenticraft/fabric/adapters/a2a_official.py:61: in __init__
    raise ImportError(
E   ImportError: A2A SDK not installed. Install with: pip install a2a-protocol
_________ TestEndToEndSDKMigration.test_preserve_agenticraft_features __________
tests/fabric/test_sdk_integration.py:268: in test_preserve_agenticraft_features
    mesh = await fabric.create_mesh_network(['agent1', 'agent2'])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedProtocolFabric' object has no attribute 'create_mesh_network'
------------------------------ Captured log call -------------------------------
WARNING  agenticraft.fabric.legacy:legacy.py:209 Overriding existing adapter for ProtocolType.MCP
______________ TestUnifiedProtocolFabric.test_initialize_with_mcp ______________
tests/fabric/test_unified.py:91: in test_initialize_with_mcp
    with patch('agenticraft.protocols.mcp.MCPClient', return_value=mock_mcp_client):
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/unittest/mock.py:1427: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/pkgutil.py:715: in resolve_name
    result = getattr(result, p)
             ^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'agenticraft' has no attribute 'protocols'
------------------------------ Captured log setup ------------------------------
WARNING  agenticraft.fabric.legacy:legacy.py:209 Overriding existing adapter for ProtocolType.MCP
=============================== warnings summary ===============================
agenticraft/core/tool.py:198
  /Users/zahere/Desktop/TLV/agenticraft/agenticraft/core/tool.py:198: PytestCollectionWarning: cannot collect 'test_calculate' because it is not a function.
    def __call__(self, *args: Any, **kwargs: Any) -> Any:

agenticraft/core/tool.py:198
  /Users/zahere/Desktop/TLV/agenticraft/agenticraft/core/tool.py:198: PytestCollectionWarning: cannot collect 'test_echo' because it is not a function.
    def __call__(self, *args: Any, **kwargs: Any) -> Any:

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
============================= slowest 10 durations =============================
61.07s call     tests/examples/test_websocket_transport.py::test_websocket_transport
4.94s call     tests/examples/test_all_providers.py::test_all_providers
0.95s call     tests/examples/test_all_providers.py::test_provider_specific_features
0.57s call     tests/examples/test_websocket_transport.py::test_performance
0.02s call     tests/examples/test_examples_pytest.py::TestExamples::test_reasoning_examples_structure
0.01s call     tests/fabric/test_enhanced_fabric.py::TestACPAdapter::test_connect
0.01s setup    tests/fabric/test_sdk_integration.py::TestSDKIntegration::test_sdk_preference_parsing
0.01s call     tests/fabric/test_enhanced_fabric.py::TestFullProtocolIntegration::test_all_protocols_config
0.01s call     tests/examples/test_websocket_mocked.py::test_basic_connection_mocked
0.01s call     tests/fabric/test_enhanced_fabric.py::TestACPAdapter::test_session_management
=========================== short test summary info ============================
FAILED tests/fabric/test_enhanced_fabric.py::TestEnhancedUnifiedProtocolFabric::test_create_mesh_network
FAILED tests/fabric/test_enhanced_fabric.py::TestEnhancedUnifiedProtocolFabric::test_enable_consensus
FAILED tests/fabric/test_enhanced_fabric.py::TestEnhancedUnifiedProtocolFabric::test_enable_reasoning_traces
FAILED tests/fabric/test_sdk_integration.py::TestSDKIntegration::test_sdk_preference_parsing
FAILED tests/fabric/test_sdk_integration.py::TestSDKIntegration::test_sdk_preference_enum
FAILED tests/fabric/test_sdk_integration.py::TestSDKIntegration::test_get_sdk_info
FAILED tests/fabric/test_sdk_integration.py::TestAdapterFactory::test_get_available_adapters
FAILED tests/fabric/test_sdk_integration.py::TestOfficialAdapters::test_a2a_official_adapter
FAILED tests/fabric/test_sdk_integration.py::TestEndToEndSDKMigration::test_preserve_agenticraft_features
FAILED tests/fabric/test_unified.py::TestUnifiedProtocolFabric::test_initialize_with_mcp
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 10 failures !!!!!!!!!!!!!!!!!!!!!!!!!!
======= 10 failed, 67 passed, 6 skipped, 2 warnings in 69.90s (0:01:09) ========
