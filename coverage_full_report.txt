============================= test session starts ==============================
platform darwin -- Python 3.11.6, pytest-8.4.0, pluggy-1.6.0
rootdir: /Users/zahere/Desktop/TLV/agenticraft
configfile: pytest.ini
plugins: xdist-3.7.0, anyio-4.9.0, timeout-2.4.0, mock-3.14.1, cov-6.1.1, asyncio-1.0.0
asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 1050 items

tests/examples/test_all_providers.py ..                                  [  0%]
tests/examples/test_examples_pytest.py .                                 [  0%]
tests/examples/test_websocket_minimal.py ....                            [  0%]
tests/examples/test_websocket_mocked.py ....                             [  1%]
tests/examples/test_websocket_pytest.py ssssss                           [  1%]
tests/examples/test_websocket_transport.py ..                            [  1%]
tests/fabric/test_decorators.py ....................                     [  3%]
tests/fabric/test_enhanced_fabric.py .................FFF......          [  6%]
tests/fabric/test_sdk_integration.py FF..F..F...F..F                     [  7%]
tests/fabric/test_unified.py ..F.....F..F.F....FF.....                   [ 10%]
tests/integration/test_examples.py ......Fs                              [ 10%]
tests/integration/test_mcp_integration.py .FF.F                          [ 11%]
tests/integration/test_mcp_integration_fixed.py .FF.F                    [ 11%]
tests/integration/test_plugin_integration.py ........                    [ 12%]
tests/integration/test_provider_switching.py ......s.........s           [ 14%]
tests/marketplace/test_manifest.py .............                         [ 15%]
tests/marketplace/test_version.py .............                          [ 16%]
tests/memory/test_knowledge_graph.py ...ss.s.....s.                      [ 17%]
tests/memory/test_vector_memory.py ..........ssssss                      [ 19%]
tests/protocols/mcp/test_adapters.py ........                            [ 20%]
tests/protocols/mcp/test_client.py .F.F...........                       [ 21%]
tests/protocols/mcp/test_registry.py .............                       [ 22%]
tests/protocols/mcp/test_server.py .............                         [ 24%]
tests/protocols/mcp/test_types.py ............................           [ 26%]
tests/protocols/test_mcp.py sssssssssssssssssssss                        [ 28%]
tests/reasoning/test_benchmarks.py .......                               [ 29%]
tests/reasoning/test_chain_of_thought.py ssssssssssss                    [ 30%]
tests/reasoning/test_react.py sssssssssss                                [ 31%]
tests/reasoning/test_reasoning_integration.py .................          [ 33%]
tests/reasoning/test_tree_of_thoughts.py sssssssssss                     [ 34%]
tests/security/test_sandbox.py ......                                    [ 34%]
tests/telemetry/test_telemetry.py .F..........s.sF.FF                    [ 36%]
tests/test_a2a_hybrid_fix.py .                                           [ 36%]
tests/test_all_sdk_fixes.py F                                            [ 36%]
tests/test_final_adapter_fixes.py .                                      [ 36%]
tests/test_mock_fix.py .                                                 [ 37%]
tests/test_name_parsing.py .                                             [ 37%]
tests/test_refactoring.py ....F...F.FF..FFF                              [ 38%]
tests/test_sandbox_basic.py .                                            [ 38%]
tests/test_sdk_integration.py ........                                   [ 39%]
tests/test_sdk_integration_fix.py F                                      [ 39%]
tests/test_security_full.py .                                            [ 39%]
tests/test_specialized_agents.py EF                                      [ 40%]
tests/test_streaming.py .........ss.                                     [ 41%]
tests/test_structure.py .FF                                              [ 41%]
tests/test_timeout.py .                                                  [ 41%]
tests/test_tool_proxy_fix.py .                                           [ 41%]
tests/test_websocket_fix.py .                                            [ 41%]
tests/unit/agents/test_reasoning_agent.py ..................             [ 43%]
tests/unit/agents/test_workflow_agent.py ...........................     [ 46%]
tests/unit/cli/test_main.py ............                                 [ 47%]
tests/unit/cli/test_new.py .................                             [ 48%]
tests/unit/cli/test_run.py .....FF.....F....                             [ 50%]
tests/unit/core/test_agent.py ........................                   [ 52%]
tests/unit/core/test_agent_config_provider.py ............               [ 53%]
tests/unit/core/test_config.py ................s.s.....                  [ 56%]
tests/unit/core/test_exceptions.py ........................              [ 58%]
tests/unit/core/test_memory.py ..........................                [ 60%]
tests/unit/core/test_plugin.py .................../Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/_pytest/main.py:343: PluggyTeardownRaisedWarning: A plugin raised an exception during an old-style hookwrapper teardown.
Plugin: _cov, Hook: pytest_runtestloop
KeyboardInterrupt: 
For more information see https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.PluggyTeardownRaisedWarning
  config.hook.pytest_runtestloop(session=session)
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! KeyboardInterrupt !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
<frozen posixpath>:451: KeyboardInterrupt
(to show a full traceback on KeyboardInterrupt use --full-trace)
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/bin/pytest", line 8, in <module>
    sys.exit(console_main())
             ^^^^^^^^^^^^^^
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/_pytest/config/__init__.py", line 201, in console_main
object address  : 0x1414579a0
object refcount : 4
object type     : 0x10c92f210
object type name: KeyboardInterrupt
object repr     : KeyboardInterrupt()
lost sys.stderr
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
Exception while exporting metrics I/O operation on closed file.
Traceback (most recent call last):
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 523, in _receive_metrics
    self._exporter.export(
  File "/Users/zahere/Desktop/TLV/agenticraft/venv/lib/python3.11/site-packages/opentelemetry/sdk/metrics/_internal/export/__init__.py", line 163, in export
    self.out.write(self.formatter(metrics_data))
ValueError: I/O operation on closed file.
